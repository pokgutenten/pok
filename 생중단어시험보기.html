<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>병음 퀴즈</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff;
            text-align: center;
            padding: 50px;
        }
        #quiz-container {
            border: 2px solid #333;
            border-radius: 10px;
            background-color: #fff;
            padding: 30px;
            width: 450px;
            margin: auto;
            position: relative;
        }
        #progress {
            margin-bottom: 15px;
            font-size: 18px;
        }
        #cat {
            position: absolute;
            bottom: -50px;
            right: -50px;
            width: 150px;
            animation: float 3s infinite;
        }
        button {
            margin: 10px;
            padding: 12px;
            font-size: 16px;
        }
        input {
            padding: 10px;
            width: 85%;
            margin-top: 10px;
            font-size: 16px;
        }
        @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="quiz-container">
        <h1>생중 병음 퀴즈</h1>
        <p id="progress">1/50</p>
        <p id="question">뜻: 재난</p>
        <input type="text" id="answer" placeholder="병음을 숫자와 함께 입력하세요 (예: shun4)">
        <br>
        <button onclick="checkAnswer()">제출할거냥?</button>
        <p id="result"></p>
        <img id="cat" src="https://i.postimg.cc/kRVFqj90/cat.gif" alt="까만 고양이">
        <button id="restart-btn" style="display:none;" onclick="restartQuiz()">한번 더?</button>
    </div>

    <script>
       const words = [
    { meaning: "재난", pinyin: "zāinàn" },
    { meaning: "생존", pinyin: "shēngcún" },
    { meaning: "기술", pinyin: "jìqiǎo" },
    { meaning: "지진", pinyin: "dìzhèn" },
    { meaning: "전혀 없음", pinyin: "háo wú" },
    { meaning: "위기", pinyin: "wēijī" },
    { meaning: "대단히", pinyin: "wànfēn" },
    { meaning: "긴급하다", pinyin: "jǐnjí" },
    { meaning: "갖추다", pinyin: "jùbèi" },
    { meaning: "상처", pinyin: "shāng" },
    { meaning: "결과", pinyin: "hòuguǒ" },
    { meaning: "~하기 어렵다", pinyin: "nányǐ" },
    { meaning: "가정하다", pinyin: "jiǎshè" },
    { meaning: "제공하다", pinyin: "tígōng" },
    { meaning: "탈출하다", pinyin: "táoshēng" },
    { meaning: "이, 이것", pinyin: "cǐ" },
    { meaning: "격렬하다", pinyin: "jùliè" },
    { meaning: "흔들리다", pinyin: "yáohuàng" },
    { meaning: "튼튼하다", pinyin: "jiéshi" },
    { meaning: "장롱", pinyin: "guìzi" },
    { meaning: "~하지 않도록", pinyin: "yǐmiǎn" },
    { meaning: "부수다", pinyin: "zá" },
    { meaning: "무게를 견디다", pinyin: "chéngzhòng" },
    { meaning: "~하기보다는", pinyin: "yǔqí" },
    { meaning: "차라리", pinyin: "nìngkě" },
    { meaning: "만약 ~가 아니라면", pinyin: "chúfēi" },
    { meaning: "폐허", pinyin: "fèixū" },
    { meaning: "냉정하다", pinyin: "lěngjìng" },
    { meaning: "발신하다", pinyin: "fāchū" },
    { meaning: "신호", pinyin: "xìnhào" },
    { meaning: "연기", pinyin: "yānwù" },
    { meaning: "불이 붙다", pinyin: "zháohuǒ" },
    { meaning: "하다, 만들다", pinyin: "nòng" },
    { meaning: "접다", pinyin: "dié" },
    { meaning: "해롭다", pinyin: "yǒuhài" },
    { meaning: "기체", pinyin: "qìtǐ" },
    { meaning: "일으키다", pinyin: "dǎozhì" },
    { meaning: "화재", pinyin: "huǒzāi" },
    { meaning: "자세", pinyin: "zīshì" },
    { meaning: "분명하다", pinyin: "qīng" },
    { meaning: "장소", pinyin: "chǎngdì" },
    { meaning: "전원", pinyin: "diànyuán" },
    { meaning: "던지다", pinyin: "tóu" },
    { meaning: "수영하다", pinyin: "yóu" },
    { meaning: "언덕", pinyin: "shānpō" },
    { meaning: "전이하다", pinyin: "zhuǎnyí" },
    { meaning: "같은 방향으로", pinyin: "shùn" },
    { meaning: "피하다", pinyin: "bì" },
    { meaning: "~에 이르지 않다", pinyin: "búzhìyú" },
    { meaning: "멈추지 않다", pinyin: "bùzhǐ" }
];

        // 숫자 병음을 성조 표기로 변환하는 함수
        function convertToPinyinWithTone(input) {
            const toneMap = {
                '1': ['ā', 'ē', 'ī', 'ō', 'ū', 'ǖ'],
                '2': ['á', 'é', 'í', 'ó', 'ú', 'ǘ'],
                '3': ['ǎ', 'ě', 'ǐ', 'ǒ', 'ǔ', 'ǚ'],
                '4': ['à', 'è', 'ì', 'ò', 'ù', 'ǜ']
            };
            const vowels = ['a', 'e', 'i', 'o', 'u', 'v']; // 'v' is for ü (u with umlaut)

            let result = input;
            for (let tone in toneMap) {
                for (let i = 0; i < vowels.length; i++) {
                    let vowel = vowels[i];
                    let regex = new RegExp(vowel + tone, 'g');
                    result = result.replace(regex, toneMap[tone][i]);
                }
            }
            return result;
        }

        let currentQuestionIndex = 0;
        let score = 0;
        let totalQuestions = words.length;
        let usedIndices = [];

        // Enter 키로 제출하는 이벤트 추가
        document.getElementById("answer").addEventListener("keydown", function(event) {
            if (event.key === "Enter") {
                checkAnswer();
            }
        });

        function getRandomIndex() {
            let index;
            do {
                index = Math.floor(Math.random() * words.length);
            } while (usedIndices.includes(index));
            usedIndices.push(index);
            return index;
        }

        function showQuestion() {
            currentQuestionIndex = getRandomIndex();
            const questionElement = document.getElementById("question");
            questionElement.innerText = `뜻: ${words[currentQuestionIndex].meaning}`;
            document.getElementById("answer").value = '';
            document.getElementById("result").innerText = '';
            updateProgress();
        }

        function checkAnswer() {
            const answer = document.getElementById("answer").value.trim();
            const numericAnswer = words[currentQuestionIndex].numeric;
            const pinyinAnswer = words[currentQuestionIndex].pinyin;
            const convertedAnswer = convertToPinyinWithTone(answer);
            const resultElement = document.getElementById("result");

            if (answer === numericAnswer || convertedAnswer === pinyinAnswer) {
                resultElement.innerText = `정답이다냥! (${pinyinAnswer})`;
                score++;
            } else {
                resultElement.innerText = `아니다냥! 정답은 ${pinyinAnswer} 이다냥.`;
            }

            if (usedIndices.length < totalQuestions) {
                setTimeout(showQuestion, 2000);  // 3초 후 다음 문제로 이동
            } else {
                resultElement.innerText += " 끝났다냥!";
                document.getElementById("restart-btn").style.display = "inline";
            }
        }

        function updateProgress() {
            const progressElement = document.getElementById("progress");
            progressElement.innerText = `${usedIndices.length}/${totalQuestions}`;
        }

        function restartQuiz() {
            usedIndices = [];
            score = 0;
            document.getElementById("restart-btn").style.display = "none";
            showQuestion();
        }

        window.onload = showQuestion;
    </script>
</body>
</html>
